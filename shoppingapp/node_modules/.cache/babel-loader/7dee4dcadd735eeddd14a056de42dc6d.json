{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\85290\\\\Desktop\\\\COMP3322\\\\A2\\\\shoppingapp\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport $ from 'jquery';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Nav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      input_category: \"\",\n      input_searchString: \"\"\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.searchProducts = this.searchProducts.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n    console.log(name);\n    console.log(value);\n  }\n\n  searchProducts() {\n    this.props.getProducts(this.state.input_category, this.state.input_searchString);\n  }\n  /* render login part HTML (top right) */\n\n\n  singinHTML() {\n    if (this.props.isLogin) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login_link\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [this.state.session_info.totalnum, \" in Cart\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Hello,\", this.state.session_info.username, \" (\", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"\",\n            children: \"Sign out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 56\n          }, this), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login_link\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"\",\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"nav\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category_link\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/#\",\n          onClick: () => this.props.getProducts('Phones', ''),\n          children: \"Phones\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/#\",\n          onClick: () => this.props.getProducts('Tablets', ''),\n          children: \"Tablets\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/#\",\n          onClick: () => this.props.getProducts('Laptops', ''),\n          children: \"Laptops\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search_box\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          name: \"input_category\",\n          onChange: this.handleInputChange,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"All\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Phones\",\n            children: \"Phones\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Tablets\",\n            children: \"Tablets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"Laptops\",\n            children: \"Laptops\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"input_searchString\",\n          value: this.state.input_searchString,\n          onChange: this.handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.searchProducts,\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), this.singinHTML()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Content extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return \"\";\n  }\n\n}\n\nfunction Footer() {}\n\n_c = Footer;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLogin: false,\n      currnet_page: 'products',\n      //'products','detail','login'\n      product_list: [],\n      product_info: [],\n      session_info: []\n    };\n    this.getProducts = this.getProducts.bind(this);\n    this.getSessionInfo = this.getSessionInfo.bind(this);\n    this.loadInitialPage();\n  }\n  /* change product list in state */\n\n\n  getProducts(category, searchString) {\n    /* note that the sorting is done in server side */\n    console.log('called getProducts()');\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadpage?category=\" + category + \"&searchstring=\" + searchString,\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        //change page to products list page and update product_list\n        console.log(result);\n        this.setState({\n          currnet_page: 'products',\n          product_list: result\n        });\n      }.bind(this)\n    });\n  }\n  /* change session info in state */\n\n\n  getSessionInfo() {\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/getsessioninfo\",\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({\n          session_info: result\n        });\n      }.bind(this)\n    });\n  }\n  /* initialize page */\n\n\n  loadInitialPage() {\n    this.getProducts(\"\", \"\");\n    this.getSessionInfo();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Nav, {\n        isLogin: this.state.isLogin,\n        getProducts: this.getProducts,\n        session_info: this.state.session_info\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Content, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"Footer\");","map":{"version":3,"names":["React","$","Nav","Component","constructor","props","state","input_category","input_searchString","handleInputChange","bind","searchProducts","event","target","value","name","setState","console","log","getProducts","singinHTML","isLogin","session_info","totalnum","username","render","Content","Footer","App","currnet_page","product_list","product_info","getSessionInfo","loadInitialPage","category","searchString","ajax","type","url","xhrFields","withCredentials","dataType","success","result"],"sources":["C:/Users/85290/Desktop/COMP3322/A2/shoppingapp/src/App.js"],"sourcesContent":["import React from 'react';\nimport './App.css';\nimport $ from 'jquery';\n\nclass Nav extends React.Component{\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      input_category: \"\",\n      input_searchString: \"\"\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this)\n    this.searchProducts = this.searchProducts.bind(this)\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({[name]: value});\n    console.log(name)\n    console.log(value)\n  }\n\n  searchProducts(){\n    this.props.getProducts(this.state.input_category,this.state.input_searchString)\n  }\n\n  /* render login part HTML (top right) */\n  singinHTML(){\n    if (this.props.isLogin){\n      return (\n        <div className='login_link'>\n          <p>{this.state.session_info.totalnum} in Cart</p>\n          <p>Hello,{this.state.session_info.username} (<a href=''>Sign out</a>)</p>\n        </div>\n      )\n    }else{\n      return <div className='login_link'><a href=''>Sign in</a></div>\n    }\n  }\n\n  render(){\n    return (\n      <nav>\n        <div className=\"category_link\">\n          <a href='/#' onClick={() => this.props.getProducts('Phones', '')}>Phones</a>\n          <a href='/#' onClick={() => this.props.getProducts('Tablets', '')}>Tablets</a>\n          <a href='/#' onClick={() => this.props.getProducts('Laptops', '')}>Laptops</a>\n        </div>\n\n        <div className='search_box'>\n          <select name=\"input_category\" onChange={this.handleInputChange}>\n            <option value=\"\">All</option>\n            <option value=\"Phones\">Phones</option>\n            <option value=\"Tablets\">Tablets</option>\n            <option value=\"Laptops\">Laptops</option>\n          </select>\n          <input \n            type=\"text\" \n            name=\"input_searchString\" \n            value={this.state.input_searchString} \n            onChange={this.handleInputChange} />\n          <button onClick={this.searchProducts}>Search</button>\n        </div>\n        {this.singinHTML()}\n        \n      </nav>\n    )\n  }\n}\n\nclass Content extends React.Component {\n  constructor(props){\n    super(props)\n  }\n  render(){\n    return \"\"\n  }\n}\n\nfunction Footer(){\n\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLogin: false,\n      currnet_page: 'products',    //'products','detail','login'\n      product_list: [],\n      product_info: [],\n      session_info: []\n    }\n    this.getProducts = this.getProducts.bind(this)\n    this.getSessionInfo = this.getSessionInfo.bind(this)\n\n    this.loadInitialPage();\n  }\n\n\n  /* change product list in state */\n  getProducts(category, searchString){\n    /* note that the sorting is done in server side */\n    console.log('called getProducts()')\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadpage?category=\" + category + \"&searchstring=\" + searchString,\n      xhrFields: {withCredentials: true},\n      dataType: 'JSON',\n      success: function(result){\n        //change page to products list page and update product_list\n        console.log(result)\n        this.setState({currnet_page: 'products', product_list: result})\n      }.bind(this)\n    })\n  }\n\n  /* change session info in state */\n  getSessionInfo(){\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/getsessioninfo\",\n      xhrFields: {withCredentials: true},\n      dataType: 'JSON',\n      success: function(result){\n        this.setState({session_info: result})\n      }.bind(this)\n    })\n  }\n\n  /* initialize page */\n  loadInitialPage(){\n    this.getProducts(\"\",\"\");\n    this.getSessionInfo();\n  }\n\n  render(){\n    return (\n      <React.Fragment>\n        <Nav \n          isLogin={this.state.isLogin}\n          getProducts={this.getProducts}\n          session_info={this.state.session_info}/>\n        <Content />\n        <Footer />\n      </React.Fragment>\n    )\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
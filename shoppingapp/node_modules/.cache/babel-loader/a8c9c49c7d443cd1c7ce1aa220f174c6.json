{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\85290\\\\Desktop\\\\COMP3322\\\\A2\\\\shoppingapp\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport $ from 'jquery';\n/* constants for current_page in state of App. Value is the figure number in assignment description */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PRODUCTS_LIST_PAGE = 1;\nconst PRODUCT_DETAIL_PAGE = 3;\nconst LOGIN_PAGE = 4;\nconst ADD_RESULT_PAGE = 5;\nconst USER_CART_PAGE = 7;\nconst CHECK_OUT_RESULT_PAGE = 8;\n\nclass Nav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      input_category: \"\",\n      input_searchString: \"\"\n    };\n    this.handleNavInputChange = this.handleNavInputChange.bind(this);\n    this.searchProducts = this.searchProducts.bind(this);\n    this.signinHTML = this.signinHTML.bind(this);\n    this.cart_link_HTML = this.cart_link_HTML.bind(this);\n  }\n\n  handleNavInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  searchProducts() {\n    this.props.getProducts(this.state.input_category, this.state.input_searchString);\n  }\n  /* render top right part HTML (e.g showing cart and login link) \n     This will change base on whether user is login */\n\n\n  signinHTML() {\n    /* hide Nav if it is login page */\n    if (this.props.current_page == LOGIN_PAGE) {\n      return '';\n    }\n\n    if (this.props.isLogin) {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Hello, \", this.props.session_info.username, \" (\", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/#\",\n          onClick: () => this.props.handleSignOut(),\n          children: \"Sign out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 55\n        }, this), \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/#\",\n          onClick: () => this.props.changePage(LOGIN_PAGE),\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n  cart_link_HTML() {\n    if (this.props.isLogin) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart_nav\",\n        onClick: () => this.props.loadCart(),\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fa fa-shopping-cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 14\n          }, this), \" \", this.props.session_info.totalnum, \" in Cart\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n  render() {\n    /* hide nav bar if it is login page */\n    if (this.props.current_page != LOGIN_PAGE) {\n      return /*#__PURE__*/_jsxDEV(\"nav\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category_link\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/#\",\n            onClick: () => this.props.getProducts('Phones', ''),\n            children: \"Phones\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/#\",\n            onClick: () => this.props.getProducts('Tablets', ''),\n            children: \"Tablets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/#\",\n            onClick: () => this.props.getProducts('Laptops', ''),\n            children: \"Laptops\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search_box\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"input_category\",\n            onChange: this.handleNavInputChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Phones\",\n              children: \"Phones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Tablets\",\n              children: \"Tablets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Laptops\",\n              children: \"Laptops\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"input_searchString\",\n            value: this.state.input_searchString,\n            onChange: this.handleNavInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.searchProducts,\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa fa-search\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 51\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), this.cart_link_HTML(), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sign_in_nav_wrapper\",\n          children: this.signinHTML()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this);\n    } else {\n      return '';\n    }\n  }\n\n}\n/* component for showing product list */\n\n\nclass Product_List extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product_list\",\n      children: this.props.product_list.map(product => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product_object\",\n          id: product._id,\n          onClick: () => this.props.getProductDetail(product._id),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"http://localhost:3001/\" + product.productImage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            children: [\"$\", product.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this)]\n        }, product._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/* component for showing product detail */\n\n\nclass Product_Detail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quantity: 1\n    };\n    this.handleQuantityInputChange = this.handleQuantityInputChange.bind(this);\n  }\n  /* return current product's JSON in product list */\n\n\n  getProductObject() {\n    return this.props.product_list.find(e => e._id === this.props.current_product_id);\n  }\n\n  handleQuantityInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product_detail_holder\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"http://localhost:3001/\" + this.getProductObject().productImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [this.getProductObject().name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 41\n        }, this), \"$\", this.getProductObject().price, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 43\n        }, this), this.props.product_detail.manufacturer, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 51\n        }, this), this.props.product_detail.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart_input_box\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Quantity:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"quantity\",\n          min: \"1\",\n          value: this.state.quantity,\n          onChange: this.handleQuantityInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.props.handleAddCart(this.props.current_product_id, this.state.quantity),\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/* login component for Content */\n\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\"\n    };\n    this.handleLoginInputChange = this.handleLoginInputChange.bind(this);\n  }\n\n  handleLoginInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login_form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        for: \"username\",\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        tpye: \"text\",\n        name: \"username\",\n        id: \"username\",\n        value: this.state.username,\n        onChange: this.handleLoginInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        for: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        tpye: \"text\",\n        name: \"password\",\n        id: \"password\",\n        type: \"password\",\n        value: this.state.password,\n        onChange: this.handleLoginInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.props.handleSignIn(this.state.username, this.state.password),\n        children: \"Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/* the component for showing result after successful add cart */\n\n\nclass Result extends React.Component {\n  /* return current product's JSON in product list */\n  getProductObject() {\n    return this.props.product_list.find(e => e._id === this.props.current_product_id);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"result\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"http://localhost:3001/\" + this.getProductObject().productImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \" \\u2714 Added to Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/* the component for showing products in user shopping cart */\n\n\nclass Shopping_Cart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleQuantityChange = this.handleQuantityChange.bind(this);\n  }\n\n  handleQuantityChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name; // this.setState({[name]: value});\n\n    console.log(name);\n    console.log(value);\n\n    if (value != 0) {\n      this.props.handleUpdateCart(name, value);\n    } else {\n      this.props.handleDeleteCart(name);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"userCart\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Shopping cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"userCartTable\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Price:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Quantity:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: [this.props.user_cart.cart.map((product, index) => {\n            var current_product_info = this.props.user_cart.productsInfo[index];\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"userCartRow\",\n              id: product.productId,\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"image_col\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: \"http://localhost:3001/\" + current_product_info.productImage\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 295,\n                  columnNumber: 47\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"name_col\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: current_product_info.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 46\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"price_col\",\n                children: [\"$\", current_product_info.price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"quantity_col\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"0\",\n                  max: \"10\",\n                  id: product.productId,\n                  name: product.productId,\n                  defaultValue: product.quantity,\n                  onChange: this.handleQuantityChange\n                }, product.productId, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 50\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 21\n              }, this)]\n            }, product.productId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 19\n            }, this);\n          }), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"total_row\",\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: 4,\n              children: [\"Cart subtotal (\", this.props.user_cart.totalnum, \" items(s)): $\", this.props.getTotalPrice()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"check_out_row\",\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: 4,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => this.props.handleCheckOut(),\n                children: \"Proceed to check out\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Check_Out_Result extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"check_out_result\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\u2713 You have successfully placed order for \", this.props.user_cart.totalnum, \" item(s)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"$\", this.props.getTotalPrice(), \" paid\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/* dynamicly change according to current_page state */\n\n\nclass Content extends React.Component {\n  constructor(props) {\n    super(props);\n    this.getTotalPrice = this.getTotalPrice.bind(this);\n  }\n  /* return total price of product in the cart. Passed to Shopping_Cart and Check_Out_Result */\n\n\n  getTotalPrice() {\n    console.log('getTotalPrice() called');\n    var total = 0;\n    this.props.user_cart.cart.map((product, index) => {\n      total += this.props.user_cart.productsInfo[index].price * product.quantity;\n    });\n    return total;\n  }\n\n  render() {\n    if (this.props.current_page == PRODUCTS_LIST_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Product_List, {\n        product_list: this.props.product_list,\n        getProductDetail: this.props.getProductDetail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 14\n      }, this);\n    } else if (this.props.current_page == PRODUCT_DETAIL_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Product_Detail, {\n        product_detail: this.props.product_detail,\n        current_product_id: this.props.current_product_id,\n        product_list: this.props.product_list,\n        handleAddCart: this.props.handleAddCart,\n        changePage: this.props.changePage,\n        isLogin: this.props.isLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 14\n      }, this);\n    } else if (this.props.current_page == LOGIN_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Login, {\n        handleSignIn: this.props.handleSignIn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 14\n      }, this);\n    } else if (this.props.current_page == ADD_RESULT_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Result, {\n        current_product_id: this.props.current_product_id,\n        product_list: this.props.product_list\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 14\n      }, this);\n    } else if (this.props.current_page == USER_CART_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Shopping_Cart, {\n        user_cart: this.props.user_cart,\n        handleUpdateCart: this.props.handleUpdateCart,\n        handleDeleteCart: this.props.handleDeleteCart,\n        handleCheckOut: this.props.handleCheckOut,\n        getTotalPrice: this.getTotalPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 14\n      }, this);\n    } else if (this.props.current_page == CHECK_OUT_RESULT_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Check_Out_Result, {\n        user_cart: this.props.user_cart,\n        getTotalPrice: this.getTotalPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 14\n      }, this);\n    }\n\n    return \"\";\n  }\n\n}\n\nclass Footer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    if (this.props.current_page == PRODUCT_DETAIL_PAGE) {\n      return /*#__PURE__*/_jsxDEV(\"footer\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: () => this.props.goback(),\n          children: \" < go back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this);\n    } else if (this.props.current_page == ADD_RESULT_PAGE || this.props.current_page == CHECK_OUT_RESULT_PAGE) {\n      return /*#__PURE__*/_jsxDEV(\"footer\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: () => this.props.getProducts(\"\", \"\"),\n          children: \"continue browsing >\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }, this);\n    }\n\n    return \"\";\n  }\n\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLogin: false,\n      current_page: PRODUCTS_LIST_PAGE,\n      //for dynamically change component\n      product_list: [],\n      //for product list page\n      current_product_id: [],\n      //for product detail page\n      product_detail: [],\n      //for storing result of /loadproduct/:productid\n      session_info: [],\n      //for storing /getsessioninfo result\n      previous_category: \"\",\n      //for going back to previous page\n      previous_searchString: \"\",\n      previous_page: \"\",\n      temp_cart: {\n        isSet: false,\n        productid: \"\",\n        quantity: \"\"\n      },\n      //temp save for return from login page to add cart\n      user_cart: {\n        cart: [],\n        productsInfo: [],\n        totalnum: 0\n      } //for storing result of /loadcart\n\n    };\n    this.getProducts = this.getProducts.bind(this);\n    this.getSessionInfo = this.getSessionInfo.bind(this);\n    this.handleSignIn = this.handleSignIn.bind(this);\n    this.handleSignOut = this.handleSignOut.bind(this);\n    this.getProductDetail = this.getProductDetail.bind(this);\n    this.goback = this.goback.bind(this);\n    this.changePage = this.changePage.bind(this);\n    this.handleAddCart = this.handleAddCart.bind(this);\n    this.loadCart = this.loadCart.bind(this);\n    this.handleUpdateCart = this.handleUpdateCart.bind(this);\n    this.handleDeleteCart = this.handleDeleteCart.bind(this);\n    this.handleCheckOut = this.handleCheckOut.bind(this);\n    this.loadInitialPage();\n  }\n  /* change product list in state and change current page to product list page */\n\n\n  getProducts(category, searchString) {\n    /* note that the sorting is done in server side */\n    console.log('getProducts() is called');\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadpage?category=\" + category + \"&searchstring=\" + searchString,\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        //save previous seach parameter into state\n        this.setState({\n          previous_category: category,\n          previous_searchString: searchString\n        }); //change page to products list page and update product_list\n\n        this.setState({\n          current_page: PRODUCTS_LIST_PAGE,\n          product_list: result\n        });\n        console.log(this.state);\n      }.bind(this)\n    });\n  }\n  /* change session info in state */\n\n\n  getSessionInfo() {\n    console.log('getSessionInfo() is called');\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/getsessioninfo\",\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({\n          session_info: result\n        });\n      }.bind(this)\n    });\n  }\n  /* initial page */\n\n\n  loadInitialPage() {\n    console.log('loadInitialPage() is called');\n    this.setState({\n      current_page: PRODUCTS_LIST_PAGE,\n      previous_category: \"\",\n      previous_searchString: \"\"\n    });\n    this.getProducts(\"\", \"\");\n    this.getSessionInfo();\n  }\n  /* change current page location (current_page state) */\n\n\n  changePage(page) {\n    console.log('changePage() is called.');\n    this.setState({\n      previous_page: this.state.current_page,\n      current_page: page\n    }, () => {\n      console.log(this.state);\n    });\n  }\n  /* handle login when user clicked 'Sign in' in login page */\n\n\n  handleSignIn(username, password) {\n    console.log('handleSingIn() is called');\n\n    if (username == \"\" || password == \"\") {\n      alert(\"You must enter username and password\");\n    } else {\n      $.ajax({\n        type: 'POST',\n        url: 'http://localhost:3001/signin',\n        data: {\n          username: username,\n          password: password\n        },\n        xhrFields: {\n          withCredentials: true\n        },\n        success: function (result) {\n          if (result.msg == 'Login success') {\n            this.setState({\n              isLogin: true\n            });\n            this.getSessionInfo(); //if it is from after clicking 'add cart', continue add cart\n\n            if (this.state.temp_cart.isSet) {\n              this.handleAddCart(this.state.temp_cart.productid, this.state.temp_cart.quantity);\n              this.setState({\n                isSet: false,\n                productid: \"\",\n                quantity: \"\"\n              });\n            } else {\n              this.changePage(this.state.previous_page);\n            }\n          }\n\n          alert(result.msg);\n        }.bind(this)\n      });\n    }\n  }\n  /* handle sign out action. Called when user click 'Sign out' link in Nav bar */\n\n\n  handleSignOut() {\n    console.log('handleSignOut() is called');\n    $.ajax({\n      type: \"GET\",\n      url: 'http://localhost:3001/signout',\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (result) {\n        if (result != '') {\n          //logout fail\n          alert(result);\n        } else {\n          //logout success\n          this.setState({\n            isLogin: false\n          });\n\n          if (this.state.current_page != PRODUCTS_LIST_PAGE && this.state.current_page != PRODUCT_DETAIL_PAGE) {\n            this.getProducts(\"\", \"\");\n          }\n        }\n      }.bind(this)\n    });\n  }\n  /* handle add to cart action. called when user click 'add to cart' in detail page */\n\n\n  handleAddCart(productid, quantity) {\n    console.log('handleAddCart() is called');\n\n    if (this.state.isLogin) {\n      $.ajax({\n        type: \"PUT\",\n        data: {\n          productid: productid,\n          quantity: quantity\n        },\n        url: \"http://localhost:3001/addtocart\",\n        dataType: 'JSON',\n        xhrFields: {\n          withCredentials: true\n        },\n        success: function (result) {\n          if (result.msg == 'Success') {\n            console.log(result);\n            this.getSessionInfo();\n            this.changePage(ADD_RESULT_PAGE);\n          } else {\n            console.log(result);\n            alert('fuck');\n          }\n        }.bind(this)\n      });\n    } else {\n      //if not yet login, save product to temp_cart, which will retreive after login\n      this.setState({\n        temp_cart: {\n          isSet: true,\n          productid: productid,\n          quantity: quantity\n        }\n      });\n      this.changePage(LOGIN_PAGE);\n    }\n  }\n  /* updating product's quantity in cart. Called when quantity in cart page is change */\n\n\n  handleUpdateCart(productId, quantity) {\n    console.log('handleUpdateCart() called');\n    $.ajax({\n      type: \"PUT\",\n      data: {\n        productid: productId,\n        quantity: quantity\n      },\n      url: \"http://localhost:3001/updatecart\",\n      dataType: 'JSON',\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (result) {\n        if (result.msg != 'Success') {\n          alert('cart update fail!');\n        } else {\n          //update totalnum in session_info, which change 'x in Cart' message in Nav\n          var s = this.state.session_info;\n          s.totalnum = result.totalnum;\n          this.setState({\n            session_info: s\n          });\n          console.log(this.state); //load cart again to update user_cart in state\n\n          this.loadCart();\n        }\n      }.bind(this)\n    });\n  }\n  /* delete product from user's cart. Called when user change quantity to 0 */\n\n\n  handleDeleteCart(productid) {\n    console.log('handleDeleteCart() called');\n    $.ajax({\n      type: \"DELETE\",\n      url: \"http://localhost:3001/deletefromcart/\" + productid,\n      dataType: 'JSON',\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (result) {\n        if (result.msg != 'Success') {\n          alert('Product delete fail!');\n        } else {\n          //update totalnum in session_info, which change 'x in Cart' message in Nav\n          var s = this.state.session_info;\n          s.totalnum = result.totalnum;\n          this.setState({\n            session_info: s\n          }); //reload cart, which will also update the view\n\n          this.loadCart();\n        }\n      }.bind(this)\n    });\n  }\n  /* handle check out action. Called when user click 'Proceed to check out' button on cart page */\n\n\n  handleCheckOut() {\n    console.log('handleCheckOut() is called');\n\n    if (this.state.user_cart.cart.length != 0) {\n      $.ajax({\n        type: \"GET\",\n        url: \"http://localhost:3001/checkout\",\n        xhrFields: {\n          withCredentials: true\n        },\n        success: function (result) {\n          console.log(result);\n\n          if (result != '') {\n            //unsuccessful\n            alert(result);\n          } else {\n            //if checkout successfully\n            //update 'xx in Cart' in Nav by load session info again\n            this.getSessionInfo();\n            this.changePage(CHECK_OUT_RESULT_PAGE);\n          }\n        }.bind(this)\n      });\n    }\n  }\n  /* go back to previous page. Called when 'go back' is clicked */\n\n\n  goback() {\n    this.getProducts(this.state.previous_category, this.state.previous_searchString);\n  }\n  /* change product_detail in state and change current page to detail page*/\n\n\n  getProductDetail(productid) {\n    console.log('getProductDetail() called');\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadproduct/\" + productid,\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({\n          product_detail: result,\n          current_page: PRODUCT_DETAIL_PAGE,\n          current_product_id: productid\n        });\n        console.log(this.state);\n      }.bind(this)\n    });\n  }\n  /* load cart page. Called when click shopping cart icon and \"xx in Cart\" in Nav */\n\n\n  loadCart() {\n    console.log('loadCart() called');\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadcart\",\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({\n          user_cart: result\n        });\n        console.log(this.state);\n        this.changePage(USER_CART_PAGE);\n      }.bind(this)\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 702,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Nav, {\n        isLogin: this.state.isLogin,\n        getProducts: this.getProducts,\n        session_info: this.state.session_info,\n        handleSignOut: this.handleSignOut,\n        changePage: this.changePage,\n        current_page: this.state.current_page,\n        loadCart: this.loadCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 703,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Content, {\n        current_page: this.state.current_page,\n        product_list: this.state.product_list,\n        product_detail: this.state.product_detail,\n        getProductDetail: this.getProductDetail,\n        current_product_id: this.state.current_product_id,\n        handleSignIn: this.handleSignIn,\n        changePage: this.changePage,\n        isLogin: this.state.isLogin,\n        handleAddCart: this.handleAddCart,\n        user_cart: this.state.user_cart,\n        handleUpdateCart: this.handleUpdateCart,\n        handleDeleteCart: this.handleDeleteCart,\n        handleCheckOut: this.handleCheckOut\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 712,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {\n        current_page: this.state.current_page,\n        getProducts: this.getProducts,\n        goback: this.goback\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 701,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","$","PRODUCTS_LIST_PAGE","PRODUCT_DETAIL_PAGE","LOGIN_PAGE","ADD_RESULT_PAGE","USER_CART_PAGE","CHECK_OUT_RESULT_PAGE","Nav","Component","constructor","props","state","input_category","input_searchString","handleNavInputChange","bind","searchProducts","signinHTML","cart_link_HTML","event","target","value","name","setState","getProducts","current_page","isLogin","session_info","username","handleSignOut","changePage","loadCart","totalnum","render","Product_List","product_list","map","product","_id","getProductDetail","productImage","price","Product_Detail","quantity","handleQuantityInputChange","getProductObject","find","e","current_product_id","product_detail","manufacturer","description","handleAddCart","Login","password","handleLoginInputChange","handleSignIn","Result","Shopping_Cart","handleQuantityChange","console","log","handleUpdateCart","handleDeleteCart","user_cart","cart","index","current_product_info","productsInfo","productId","getTotalPrice","handleCheckOut","Check_Out_Result","Content","total","Footer","goback","App","previous_category","previous_searchString","previous_page","temp_cart","isSet","productid","getSessionInfo","loadInitialPage","category","searchString","ajax","type","url","xhrFields","withCredentials","dataType","success","result","page","alert","data","msg","s","length"],"sources":["C:/Users/85290/Desktop/COMP3322/A2/shoppingapp/src/App.js"],"sourcesContent":["import React from 'react';\nimport './App.css';\nimport $ from 'jquery';\n\n/* constants for current_page in state of App. Value is the figure number in assignment description */\nconst PRODUCTS_LIST_PAGE = 1\nconst PRODUCT_DETAIL_PAGE = 3\nconst LOGIN_PAGE = 4\nconst ADD_RESULT_PAGE = 5\nconst USER_CART_PAGE = 7\nconst CHECK_OUT_RESULT_PAGE = 8\n\nclass Nav extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      input_category: \"\",\n      input_searchString: \"\"\n    }\n\n    this.handleNavInputChange = this.handleNavInputChange.bind(this)\n    this.searchProducts = this.searchProducts.bind(this)\n    this.signinHTML = this.signinHTML.bind(this)\n    this.cart_link_HTML = this.cart_link_HTML.bind(this)\n  }\n\n  handleNavInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({ [name]: value });\n\n  }\n\n  searchProducts() {\n    this.props.getProducts(this.state.input_category, this.state.input_searchString)\n  }\n\n  /* render top right part HTML (e.g showing cart and login link) \n     This will change base on whether user is login */\n  signinHTML() {\n    /* hide Nav if it is login page */\n    if (this.props.current_page == LOGIN_PAGE) {\n      return ''\n    }\n\n    if (this.props.isLogin) {\n      return (\n        <p>Hello, {this.props.session_info.username} (<a href='/#' onClick={() => this.props.handleSignOut()}>Sign out</a>)</p>\n      )\n    } else {\n      return (\n        <p>\n          <a href='/#' onClick={() => this.props.changePage(LOGIN_PAGE)}>Sign in</a>\n        </p>\n      )\n    }\n  }\n\n  cart_link_HTML() {\n    if (this.props.isLogin) {\n      return (\n        <div className='cart_nav' onClick={() => this.props.loadCart()}>\n          <p><i class=\"fa fa-shopping-cart\"></i> {this.props.session_info.totalnum} in Cart</p>\n        </div>\n      )\n    }\n  }\n\n  render() {\n    /* hide nav bar if it is login page */\n    if (this.props.current_page != LOGIN_PAGE) {\n      return (\n        <nav>\n          <div className=\"category_link\">\n            <a href='/#' onClick={() => this.props.getProducts('Phones', '')}>Phones</a>\n            <a href='/#' onClick={() => this.props.getProducts('Tablets', '')}>Tablets</a>\n            <a href='/#' onClick={() => this.props.getProducts('Laptops', '')}>Laptops</a>\n          </div>\n\n          <div className='search_box'>\n            <select name=\"input_category\" onChange={this.handleNavInputChange}>\n              <option value=\"\">All</option>\n              <option value=\"Phones\">Phones</option>\n              <option value=\"Tablets\">Tablets</option>\n              <option value=\"Laptops\">Laptops</option>\n            </select>\n            <input\n              type=\"text\"\n              name=\"input_searchString\"\n              value={this.state.input_searchString}\n              onChange={this.handleNavInputChange} />\n            <button onClick={this.searchProducts}><i class=\"fa fa-search\"></i></button>\n          </div>\n          {this.cart_link_HTML()}\n          <div className='sign_in_nav_wrapper'>\n            {this.signinHTML()}\n          </div>\n\n        </nav>\n      )\n    } else {\n      return ''\n    }\n  }\n}\n\n/* component for showing product list */\nclass Product_List extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return (\n      <div className='product_list'>\n        {\n          this.props.product_list.map((product) => {\n            return (\n              <div className='product_object'\n                key={product._id}\n                id={product._id}\n                onClick={() => this.props.getProductDetail(product._id)}>\n                <img src={\"http://localhost:3001/\" + product.productImage}></img>\n                <br />\n                <a>{product.name}</a>\n                <br />\n                <a>${product.price}</a>\n              </div>\n            )\n          })\n        }\n      </div>\n    )\n  }\n}\n\n/* component for showing product detail */\nclass Product_Detail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { quantity: 1 }\n\n    this.handleQuantityInputChange = this.handleQuantityInputChange.bind(this)\n  }\n\n  /* return current product's JSON in product list */\n  getProductObject() {\n    return this.props.product_list.find(e => e._id === this.props.current_product_id)\n  }\n\n  handleQuantityInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({ [name]: value });\n  }\n\n  render() {\n    return (\n      <div className='product_detail_holder'>\n        <img src={\"http://localhost:3001/\" + this.getProductObject().productImage}></img>\n        <p>\n          {this.getProductObject().name}<br />\n          ${this.getProductObject().price}<br />\n          {this.props.product_detail.manufacturer}<br />\n          {this.props.product_detail.description}\n        </p>\n        <div className='cart_input_box'>\n          <p>Quantity:</p>\n          <input\n            type=\"number\"\n            name=\"quantity\"\n            min=\"1\"\n            value={this.state.quantity}\n            onChange={this.handleQuantityInputChange} />\n          <br />\n          <button onClick={() => this.props.handleAddCart(this.props.current_product_id, this.state.quantity)}>Add to Cart</button>\n        </div>\n      </div>\n    )\n  }\n}\n\n/* login component for Content */\nclass Login extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      username: \"\",\n      password: \"\"\n    }\n\n    this.handleLoginInputChange = this.handleLoginInputChange.bind(this)\n  }\n\n  handleLoginInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({ [name]: value });\n  }\n\n  render() {\n    return (\n      <div className='login_form'>\n        <label for=\"username\">Username</label>\n        <input\n          tpye=\"text\"\n          name=\"username\"\n          id=\"username\"\n          value={this.state.username}\n          onChange={this.handleLoginInputChange} />\n        <br />\n        <label for=\"password\">Password</label>\n        <input\n          tpye=\"text\"\n          name=\"password\"\n          id=\"password\"\n          type=\"password\"\n          value={this.state.password}\n          onChange={this.handleLoginInputChange} />\n        <br />\n        <button onClick={() => this.props.handleSignIn(this.state.username, this.state.password)}>Sign in</button>\n      </div>\n    )\n  }\n}\n\n/* the component for showing result after successful add cart */\nclass Result extends React.Component {\n  /* return current product's JSON in product list */\n  getProductObject() {\n    return this.props.product_list.find(e => e._id === this.props.current_product_id)\n  }\n  render() {\n    return (\n      <div className='result'>\n        <img src={\"http://localhost:3001/\" + this.getProductObject().productImage}></img>\n        <p> &#10004; Added to Cart</p>\n      </div>\n    )\n  }\n}\n\n/* the component for showing products in user shopping cart */\nclass Shopping_Cart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleQuantityChange = this.handleQuantityChange.bind(this)\n  }\n\n\n  handleQuantityChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n\n    // this.setState({[name]: value});\n    console.log(name)\n    console.log(value)\n\n    if (value != 0) {\n      this.props.handleUpdateCart(name, value);\n    } else {\n      this.props.handleDeleteCart(name);\n    }\n  }\n\n\n  render() {\n    return (\n      <div className='userCart'>\n        <h3>Shopping cart</h3>\n        <table className='userCartTable'>\n          <thead>\n            <tr>\n              <th></th>\n              <th></th>\n              <th>Price:</th>\n              <th>Quantity:</th>\n            </tr>\n          </thead>\n          <tbody>\n            {\n              this.props.user_cart.cart.map((product, index) => {\n                var current_product_info = this.props.user_cart.productsInfo[index]\n                return (\n                  <tr className='userCartRow'\n                    key={product.productId}\n                    id={product.productId}>\n                    <td className='image_col'><img src={\"http://localhost:3001/\" + current_product_info.productImage}></img></td>\n                    <td className='name_col'><p>{current_product_info.name}</p></td>\n                    <td className='price_col'>${current_product_info.price}</td>\n                    <td className='quantity_col'><input\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"10\"\n                      key={product.productId}\n                      id={product.productId}\n                      name={product.productId}\n                      defaultValue={product.quantity}\n                      onChange={this.handleQuantityChange} />\n                    </td>\n                  </tr>)\n              })\n            }\n            <tr className='total_row'>\n              <td colSpan={4}>Cart subtotal ({this.props.user_cart.totalnum} items(s)): ${this.props.getTotalPrice()}</td>\n            </tr>\n            <tr className='check_out_row'>\n              <td colSpan={4}>\n                <button onClick={() => this.props.handleCheckOut()}>Proceed to check out</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n\n      </div>\n    )\n  }\n}\n\nclass Check_Out_Result extends React.Component {\n  render() {\n    return (\n      <div className='check_out_result'>\n        <p>&#10003; You have successfully placed order for {this.props.user_cart.totalnum} item(s)</p>\n        <p>${this.props.getTotalPrice()} paid</p>\n      </div>\n    )\n  }\n}\n\n/* dynamicly change according to current_page state */\nclass Content extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.getTotalPrice = this.getTotalPrice.bind(this)\n  }\n\n  /* return total price of product in the cart. Passed to Shopping_Cart and Check_Out_Result */\n  getTotalPrice() {\n    console.log('getTotalPrice() called')\n    var total = 0;\n    this.props.user_cart.cart.map((product, index) => {\n      total += this.props.user_cart.productsInfo[index].price * product.quantity;\n    })\n    return total\n  }\n\n  render() {\n    if (this.props.current_page == PRODUCTS_LIST_PAGE) {\n      return <Product_List\n        product_list={this.props.product_list}\n        getProductDetail={this.props.getProductDetail} />\n\n    } else if (this.props.current_page == PRODUCT_DETAIL_PAGE) {\n      return <Product_Detail\n        product_detail={this.props.product_detail}\n        current_product_id={this.props.current_product_id}\n        product_list={this.props.product_list}\n        handleAddCart={this.props.handleAddCart}\n        changePage={this.props.changePage}\n        isLogin={this.props.isLogin} />\n\n    } else if (this.props.current_page == LOGIN_PAGE) {\n      return <Login\n        handleSignIn={this.props.handleSignIn} />\n\n    } else if (this.props.current_page == ADD_RESULT_PAGE) {\n      return <Result\n        current_product_id={this.props.current_product_id}\n        product_list={this.props.product_list} />\n\n    } else if (this.props.current_page == USER_CART_PAGE) {\n      return <Shopping_Cart\n        user_cart={this.props.user_cart}\n        handleUpdateCart={this.props.handleUpdateCart}\n        handleDeleteCart={this.props.handleDeleteCart}\n        handleCheckOut={this.props.handleCheckOut}\n        getTotalPrice={this.getTotalPrice} />\n    } else if (this.props.current_page == CHECK_OUT_RESULT_PAGE) {\n      return <Check_Out_Result\n        user_cart={this.props.user_cart}\n        getTotalPrice={this.getTotalPrice} />\n    }\n    return \"\"\n  }\n}\n\nclass Footer extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    if (this.props.current_page == PRODUCT_DETAIL_PAGE) {\n      return (\n        <footer>\n          <a onClick={() => this.props.goback()}> &lt; go back</a>\n        </footer>\n      )\n    } else if (this.props.current_page == ADD_RESULT_PAGE || this.props.current_page == CHECK_OUT_RESULT_PAGE) {\n      return (\n        <footer>\n          <a onClick={() => this.props.getProducts(\"\", \"\")}>continue browsing &#62;</a>\n        </footer>\n      )\n    }\n    return \"\"\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLogin: false,\n      current_page: PRODUCTS_LIST_PAGE,   //for dynamically change component\n      product_list: [],                   //for product list page\n      current_product_id: [],             //for product detail page\n      product_detail: [],                 //for storing result of /loadproduct/:productid\n      session_info: [],                   //for storing /getsessioninfo result\n      previous_category: \"\",              //for going back to previous page\n      previous_searchString: \"\",\n      previous_page: \"\",\n      temp_cart: { isSet: false, productid: \"\", quantity: \"\" },     //temp save for return from login page to add cart\n      user_cart: { cart: [], productsInfo: [], totalnum: 0 }         //for storing result of /loadcart\n    }\n\n    this.getProducts = this.getProducts.bind(this)\n    this.getSessionInfo = this.getSessionInfo.bind(this)\n    this.handleSignIn = this.handleSignIn.bind(this)\n    this.handleSignOut = this.handleSignOut.bind(this)\n    this.getProductDetail = this.getProductDetail.bind(this)\n    this.goback = this.goback.bind(this)\n    this.changePage = this.changePage.bind(this)\n    this.handleAddCart = this.handleAddCart.bind(this)\n    this.loadCart = this.loadCart.bind(this)\n    this.handleUpdateCart = this.handleUpdateCart.bind(this)\n    this.handleDeleteCart = this.handleDeleteCart.bind(this)\n    this.handleCheckOut = this.handleCheckOut.bind(this)\n\n    this.loadInitialPage();\n  }\n\n\n  /* change product list in state and change current page to product list page */\n  getProducts(category, searchString) {\n    /* note that the sorting is done in server side */\n    console.log('getProducts() is called')\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadpage?category=\" + category + \"&searchstring=\" + searchString,\n      xhrFields: { withCredentials: true },\n      dataType: 'JSON',\n      success: function (result) {\n        //save previous seach parameter into state\n        this.setState({ previous_category: category, previous_searchString: searchString })\n\n        //change page to products list page and update product_list\n        this.setState({ current_page: PRODUCTS_LIST_PAGE, product_list: result })\n        console.log(this.state)\n      }.bind(this)\n    })\n  }\n\n  /* change session info in state */\n  getSessionInfo() {\n    console.log('getSessionInfo() is called')\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/getsessioninfo\",\n      xhrFields: { withCredentials: true },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({ session_info: result })\n      }.bind(this)\n    })\n  }\n\n  /* initial page */\n  loadInitialPage() {\n    console.log('loadInitialPage() is called')\n    this.setState({ current_page: PRODUCTS_LIST_PAGE, previous_category: \"\", previous_searchString: \"\" })\n    this.getProducts(\"\", \"\");\n    this.getSessionInfo();\n  }\n\n  /* change current page location (current_page state) */\n  changePage(page) {\n    console.log('changePage() is called.')\n    this.setState({ previous_page: this.state.current_page, current_page: page }, () => {\n      console.log(this.state)\n    })\n  }\n\n  /* handle login when user clicked 'Sign in' in login page */\n  handleSignIn(username, password) {\n    console.log('handleSingIn() is called')\n    if (username == \"\" || password == \"\") {\n      alert(\"You must enter username and password\")\n    } else {\n      $.ajax({\n        type: 'POST',\n        url: 'http://localhost:3001/signin',\n        data: { username: username, password: password },\n        xhrFields: { withCredentials: true },\n        success: function (result) {\n          if (result.msg == 'Login success') {\n            this.setState({ isLogin: true })\n            this.getSessionInfo()\n\n            //if it is from after clicking 'add cart', continue add cart\n            if (this.state.temp_cart.isSet) {\n              this.handleAddCart(this.state.temp_cart.productid, this.state.temp_cart.quantity)\n              this.setState({ isSet: false, productid: \"\", quantity: \"\" })\n            } else {\n              this.changePage(this.state.previous_page)\n            }\n          }\n          alert(result.msg)\n\n        }.bind(this)\n      })\n    }\n  }\n\n  /* handle sign out action. Called when user click 'Sign out' link in Nav bar */\n  handleSignOut() {\n    console.log('handleSignOut() is called')\n    $.ajax({\n      type: \"GET\",\n      url: 'http://localhost:3001/signout',\n      xhrFields: { withCredentials: true },\n      success: function (result) {\n        if (result != '') {\n          //logout fail\n          alert(result)\n        } else {\n          //logout success\n          this.setState({ isLogin: false })\n          if (this.state.current_page != PRODUCTS_LIST_PAGE && this.state.current_page != PRODUCT_DETAIL_PAGE) {\n            this.getProducts(\"\", \"\")\n          }\n        }\n      }.bind(this)\n    })\n  }\n\n  /* handle add to cart action. called when user click 'add to cart' in detail page */\n  handleAddCart(productid, quantity) {\n    console.log('handleAddCart() is called')\n    if (this.state.isLogin) {\n      $.ajax({\n        type: \"PUT\",\n        data: { productid: productid, quantity: quantity },\n        url: \"http://localhost:3001/addtocart\",\n        dataType: 'JSON',\n        xhrFields: { withCredentials: true },\n        success: function (result) {\n          if (result.msg == 'Success') {\n            console.log(result)\n            this.getSessionInfo()\n            this.changePage(ADD_RESULT_PAGE)\n          } else {\n            console.log(result)\n            alert('fuck')\n          }\n        }.bind(this)\n      })\n    } else {\n      //if not yet login, save product to temp_cart, which will retreive after login\n      this.setState({ temp_cart: { isSet: true, productid: productid, quantity: quantity } })\n      this.changePage(LOGIN_PAGE)\n\n    }\n  }\n\n  /* updating product's quantity in cart. Called when quantity in cart page is change */\n  handleUpdateCart(productId, quantity) {\n    console.log('handleUpdateCart() called');\n    $.ajax({\n      type: \"PUT\",\n      data: { productid: productId, quantity: quantity },\n      url: \"http://localhost:3001/updatecart\",\n      dataType: 'JSON',\n      xhrFields: { withCredentials: true },\n      success: function (result) {\n        if (result.msg != 'Success') {\n          alert('cart update fail!');\n        } else {\n          //update totalnum in session_info, which change 'x in Cart' message in Nav\n          var s = this.state.session_info;\n          s.totalnum = result.totalnum;\n          this.setState({ session_info: s })\n          console.log(this.state)\n\n          //load cart again to update user_cart in state\n          this.loadCart()\n        }\n      }.bind(this)\n    })\n  }\n\n  /* delete product from user's cart. Called when user change quantity to 0 */\n  handleDeleteCart(productid) {\n    console.log('handleDeleteCart() called')\n    $.ajax({\n      type: \"DELETE\",\n      url: \"http://localhost:3001/deletefromcart/\" + productid,\n      dataType: 'JSON',\n      xhrFields: { withCredentials: true },\n      success: function (result) {\n        if (result.msg != 'Success') {\n          alert('Product delete fail!');\n        } else {\n          //update totalnum in session_info, which change 'x in Cart' message in Nav\n          var s = this.state.session_info;\n          s.totalnum = result.totalnum;\n          this.setState({ session_info: s })\n\n          //reload cart, which will also update the view\n          this.loadCart()\n        }\n      }.bind(this)\n\n    })\n  }\n\n  /* handle check out action. Called when user click 'Proceed to check out' button on cart page */\n  handleCheckOut() {\n    console.log('handleCheckOut() is called');\n    if (this.state.user_cart.cart.length != 0) {\n      $.ajax({\n        type: \"GET\",\n        url: \"http://localhost:3001/checkout\",\n        xhrFields: { withCredentials: true },\n        success: function (result) {\n          console.log(result);\n          if (result != '') {\n            //unsuccessful\n            alert(result)\n          } else {\n            //if checkout successfully\n            //update 'xx in Cart' in Nav by load session info again\n            this.getSessionInfo();\n\n            this.changePage(CHECK_OUT_RESULT_PAGE);\n          }\n        }.bind(this)\n      })\n    }\n  }\n\n  /* go back to previous page. Called when 'go back' is clicked */\n  goback() {\n    this.getProducts(this.state.previous_category, this.state.previous_searchString);\n  }\n\n  /* change product_detail in state and change current page to detail page*/\n  getProductDetail(productid) {\n    console.log('getProductDetail() called')\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadproduct/\" + productid,\n      xhrFields: { withCredentials: true },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({ product_detail: result, current_page: PRODUCT_DETAIL_PAGE, current_product_id: productid })\n        console.log(this.state)\n      }.bind(this)\n    })\n  }\n\n  /* load cart page. Called when click shopping cart icon and \"xx in Cart\" in Nav */\n  loadCart() {\n    console.log('loadCart() called')\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadcart\",\n      xhrFields: { withCredentials: true },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({ user_cart: result })\n        console.log(this.state)\n        this.changePage(USER_CART_PAGE)\n\n      }.bind(this)\n    })\n\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css\"></link>\n        <Nav\n          isLogin={this.state.isLogin}\n          getProducts={this.getProducts}\n          session_info={this.state.session_info}\n          handleSignOut={this.handleSignOut}\n          changePage={this.changePage}\n          current_page={this.state.current_page}\n          loadCart={this.loadCart}\n        />\n        <Content\n          current_page={this.state.current_page}\n          product_list={this.state.product_list}\n          product_detail={this.state.product_detail}\n          getProductDetail={this.getProductDetail}\n          current_product_id={this.state.current_product_id}\n          handleSignIn={this.handleSignIn}\n          changePage={this.changePage}\n          isLogin={this.state.isLogin}\n          handleAddCart={this.handleAddCart}\n          user_cart={this.state.user_cart}\n          handleUpdateCart={this.handleUpdateCart}\n          handleDeleteCart={this.handleDeleteCart}\n          handleCheckOut={this.handleCheckOut}\n        />\n        <Footer\n          current_page={this.state.current_page}\n          getProducts={this.getProducts}\n          goback={this.goback} />\n      </React.Fragment>\n    )\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\85290\\\\Desktop\\\\COMP3322\\\\A2\\\\shoppingapp\\\\src\\\\App.js\";\nimport React from 'react';\nimport './App.css';\nimport $ from 'jquery';\n/* constants for current_page in state of App */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PRODUCTS_LIST_PAGE = 1;\nconst PRODUCT_DETAIL_PAGE = 2;\nconst LOGIN_PAGE = 3;\n\nclass Nav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      input_category: \"\",\n      input_searchString: \"\"\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.searchProducts = this.searchProducts.bind(this);\n    this.signinHTML = this.signinHTML.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n    console.log(name);\n    console.log(value);\n  }\n\n  searchProducts() {\n    this.props.getProducts(this.state.input_category, this.state.input_searchString);\n  }\n  /* render login part HTML (top right) */\n\n\n  signinHTML() {\n    /* hide Nav if it is login page */\n    if (this.props.current_page == LOGIN_PAGE) {\n      return '';\n    }\n\n    if (this.props.isLogin) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login_link\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [this.props.session_info.totalnum, \" in Cart\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Hello,\", this.props.session_info.username, \" (\", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/#\",\n            onClick: () => this.props.handleSignOut(),\n            children: \"Sign out\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 56\n          }, this), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login_link\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/#\",\n          onClick: () => this.props.changePage(LOGIN_PAGE),\n          children: \"Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n  render() {\n    /* hide nav bar if it is login page */\n    if (this.props.current_page != LOGIN_PAGE) {\n      return /*#__PURE__*/_jsxDEV(\"nav\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"category_link\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/#\",\n            onClick: () => this.props.getProducts('Phones', ''),\n            children: \"Phones\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/#\",\n            onClick: () => this.props.getProducts('Tablets', ''),\n            children: \"Tablets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/#\",\n            onClick: () => this.props.getProducts('Laptops', ''),\n            children: \"Laptops\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search_box\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"input_category\",\n            onChange: this.handleInputChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Phones\",\n              children: \"Phones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Tablets\",\n              children: \"Tablets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Laptops\",\n              children: \"Laptops\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"input_searchString\",\n            value: this.state.input_searchString,\n            onChange: this.handleInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.searchProducts,\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), this.signinHTML()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this);\n    } else {\n      return '';\n    }\n  }\n\n}\n/* component for showing product list */\n\n\nclass Product_List extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return this.props.product_list.map(product => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product_object\",\n        id: product._id,\n        onClick: () => this.props.getProductDetail(product._id),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"http://localhost:3001/\" + product.productImage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          children: product.price\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, product._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this);\n    });\n  }\n\n}\n/* component for showing product detail */\n\n\nclass Product_Detail extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      quantity: 1\n    };\n    this.checkLogin = this.checkLogin.bind(this);\n  }\n  /* return current product's JSON in product list */\n\n\n  getProductObject() {\n    return this.props.product_list.find(e => e._id === this.props.current_product_id);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n    console.log(name);\n    console.log(value);\n  }\n\n  checkLogin() {\n    console.log('login check');\n    console.log(this.props.isLogin);\n\n    if (this.props.isLogin) {\n      console.log('login check success');\n      this.props.handleAddCart(this.props.current_product_id, this.state.quantity);\n    } else {\n      this.props.changePage(LOGIN_PAGE);\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product_detail_holder\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"http://localhost:3001/\" + this.getProductObject().productImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [this.getProductObject().name, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 41\n        }, this), this.getProductObject().price, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 42\n        }, this), this.props.product_detail.manufacturer, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 51\n        }, this), this.props.product_detail.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart_input_bex\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"quantity\",\n          min: \"1\",\n          value: this.state.quantity,\n          onChange: this.handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.checkLogin(),\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/* login component for Content */\n\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\"\n    };\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      [name]: value\n    });\n    console.log(name);\n    console.log(value);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login_form\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        for: \"username\",\n        children: \"Username\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        tpye: \"text\",\n        name: \"username\",\n        id: \"username\",\n        value: this.state.username,\n        onChange: this.handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        for: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        tpye: \"text\",\n        name: \"password\",\n        id: \"password\",\n        value: this.state.password,\n        onChange: this.handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.props.handleSignIn(this.state.username, this.state.password),\n        children: \"Sign in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n/* dynamicly change according to current_page state */\n\n\nclass Content extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    if (this.props.current_page == PRODUCTS_LIST_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Product_List, {\n        product_list: this.props.product_list,\n        getProductDetail: this.props.getProductDetail\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 14\n      }, this);\n    } else if (this.props.current_page == PRODUCT_DETAIL_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Product_Detail, {\n        product_detail: this.props.product_detail,\n        current_product_id: this.props.current_product_id,\n        product_list: this.props.product_list,\n        handleAddCart: this.props.handleAddCart,\n        changePage: this.props.changePage,\n        isLogin: this.props.isLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 14\n      }, this);\n    } else if (this.props.current_page == LOGIN_PAGE) {\n      return /*#__PURE__*/_jsxDEV(Login, {\n        handleSignIn: this.props.handleSignIn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 14\n      }, this);\n    }\n\n    return \"\";\n  }\n\n}\n\nclass Footer extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    if (this.props.current_page == PRODUCT_DETAIL_PAGE) {\n      return /*#__PURE__*/_jsxDEV(\"footer\", {\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: () => this.props.goback(),\n          children: \" < go back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this);\n    }\n\n    return \"\";\n  }\n\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLogin: false,\n      current_page: PRODUCTS_LIST_PAGE,\n      product_list: [],\n      current_product_id: [],\n      product_detail: [],\n      session_info: [],\n      previous_category: \"\",\n      previous_searchString: \"\",\n      previous_page: \"\"\n    };\n    this.getProducts = this.getProducts.bind(this);\n    this.getSessionInfo = this.getSessionInfo.bind(this);\n    this.handleSignIn = this.handleSignIn.bind(this);\n    this.handleSignOut = this.handleSignOut.bind(this);\n    this.getProductDetail = this.getProductDetail.bind(this);\n    this.goback = this.goback.bind(this);\n    this.changePage = this.changePage.bind(this);\n    this.handleAddCart = this.handleAddCart.bind(this);\n    this.loadInitialPage();\n  }\n  /* change product list in state and change current page to product list page */\n\n\n  getProducts(category, searchString) {\n    /* note that the sorting is done in server side */\n    console.log('called getProducts()');\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadpage?category=\" + category + \"&searchstring=\" + searchString,\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        //save previous seach parameter into state\n        this.setState({\n          previous_category: category,\n          previous_searchString: searchString\n        }); //change page to products list page and update product_list\n\n        this.setState({\n          current_page: PRODUCTS_LIST_PAGE,\n          product_list: result\n        });\n        console.log(this.state);\n      }.bind(this)\n    });\n  }\n  /* change session info in state */\n\n\n  getSessionInfo() {\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/getsessioninfo\",\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({\n          session_info: result\n        });\n      }.bind(this)\n    });\n  }\n  /* initial page */\n\n\n  loadInitialPage() {\n    this.setState({\n      current_page: PRODUCTS_LIST_PAGE,\n      previous_category: \"\",\n      previous_searchString: \"\"\n    });\n    this.getProducts(\"\", \"\");\n    this.getSessionInfo();\n  }\n  /* change current page location (current_page state) */\n\n\n  changePage(page) {\n    console.log('changePage is called.');\n    console.log(this.state);\n    console.log(page); // this.setState({previous_page: this.state.current_page})\n\n    this.setState({\n      previous_page: this.state.current_page,\n      current_page: page\n    }, () => {\n      console.log('after change');\n      console.log(this.state);\n    });\n  }\n\n  handleSignIn(username, password) {\n    console.log(username, password);\n\n    if (username == \"\" || password == \"\") {\n      alert(\"You must enter username and password\");\n    } else {\n      $.ajax({\n        type: 'POST',\n        url: 'http://localhost:3001/signin',\n        data: {\n          username: username,\n          password: password\n        },\n        xhrFields: {\n          withCredentials: true\n        },\n        success: function (result) {\n          if (result.msg == 'Login success') {\n            this.setState({\n              isLogin: true\n            });\n            this.changePage(this.state.previous_page);\n            this.getSessionInfo();\n          }\n\n          alert(result.msg);\n        }.bind(this)\n      });\n    }\n  }\n\n  handleSignOut() {}\n\n  handleAddCart(productid, quantity) {\n    if (this.state.isLogin) {\n      $.ajax({\n        type: \"PUT\",\n        data: {\n          productid: productid,\n          quantity: quantity\n        },\n        url: \"http://localhost:3001/addtocart\",\n        dataType: 'JSON',\n        xhrFields: {\n          withCredentials: true\n        },\n        success: function (result) {\n          if (result.msg == 'Success') {\n            this.getSessionInfo();\n            this.changePage(PRODUCTS_LIST_PAGE);\n          } else {\n            console.log(result);\n            alert('fuck');\n          }\n        }.bind(this)\n      });\n    } else {}\n  }\n  /* go back to previous page. Called when 'go back' is clicked */\n\n\n  goback() {\n    this.getProducts(this.state.previous_category, this.state.previous_searchString);\n  }\n  /* change product_detail in state and change current page to detail page*/\n\n\n  getProductDetail(productid) {\n    console.log('getProductDetail');\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadproduct/\" + productid,\n      xhrFields: {\n        withCredentials: true\n      },\n      dataType: 'JSON',\n      success: function (result) {\n        this.setState({\n          product_detail: result,\n          current_page: PRODUCT_DETAIL_PAGE,\n          current_product_id: productid\n        });\n        console.log(this.state);\n      }.bind(this)\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Nav, {\n        isLogin: this.state.isLogin,\n        getProducts: this.getProducts,\n        session_info: this.state.session_info,\n        handleSignOut: this.handleSignOut,\n        changePage: this.changePage,\n        current_page: this.state.current_page\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Content, {\n        current_page: this.state.current_page,\n        product_list: this.state.product_list,\n        product_detail: this.state.product_detail,\n        getProductDetail: this.getProductDetail,\n        current_product_id: this.state.current_product_id,\n        handleSignIn: this.handleSignIn,\n        changePage: this.changePage,\n        isLogin: this.state.isLogin,\n        handleAddCart: this.handleAddCart\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {\n        current_page: this.state.current_page,\n        goback: this.goback\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"names":["React","$","PRODUCTS_LIST_PAGE","PRODUCT_DETAIL_PAGE","LOGIN_PAGE","Nav","Component","constructor","props","state","input_category","input_searchString","handleInputChange","bind","searchProducts","signinHTML","event","target","value","name","setState","console","log","getProducts","current_page","isLogin","session_info","totalnum","username","handleSignOut","changePage","render","Product_List","product_list","map","product","_id","getProductDetail","productImage","price","Product_Detail","quantity","checkLogin","getProductObject","find","e","current_product_id","handleAddCart","product_detail","manufacturer","description","Login","password","handleSignIn","Content","Footer","goback","App","previous_category","previous_searchString","previous_page","getSessionInfo","loadInitialPage","category","searchString","ajax","type","url","xhrFields","withCredentials","dataType","success","result","page","alert","data","msg","productid"],"sources":["C:/Users/85290/Desktop/COMP3322/A2/shoppingapp/src/App.js"],"sourcesContent":["import React from 'react';\nimport './App.css';\nimport $ from 'jquery';\n\n/* constants for current_page in state of App */\nconst PRODUCTS_LIST_PAGE = 1\nconst PRODUCT_DETAIL_PAGE = 2\nconst LOGIN_PAGE = 3\n\nclass Nav extends React.Component{\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      input_category: \"\",\n      input_searchString: \"\"\n    }\n\n    this.handleInputChange = this.handleInputChange.bind(this)\n    this.searchProducts = this.searchProducts.bind(this)\n    this.signinHTML = this.signinHTML.bind(this)\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({[name]: value});\n    console.log(name)\n    console.log(value)\n  }\n\n  searchProducts(){\n    this.props.getProducts(this.state.input_category,this.state.input_searchString)\n  }\n\n  /* render login part HTML (top right) */\n  signinHTML(){\n    /* hide Nav if it is login page */\n    if (this.props.current_page == LOGIN_PAGE){\n      return ''\n    }\n\n    if (this.props.isLogin){\n      return (\n        <div className='login_link'>\n          <p>{this.props.session_info.totalnum} in Cart</p>\n          <p>Hello,{this.props.session_info.username} (<a href='/#' onClick={() => this.props.handleSignOut()}>Sign out</a>)</p>\n        </div>\n      )\n    }else{\n      return (\n        <div className='login_link'>\n          <a href='/#' onClick={() => this.props.changePage(LOGIN_PAGE)}>Sign in</a>\n        </div>\n      )\n    }\n  }\n\n  render(){\n    /* hide nav bar if it is login page */\n    if (this.props.current_page != LOGIN_PAGE){\n      return (\n        <nav>\n          <div className=\"category_link\">\n            <a href='/#' onClick={() => this.props.getProducts('Phones', '')}>Phones</a>\n            <a href='/#' onClick={() => this.props.getProducts('Tablets', '')}>Tablets</a>\n            <a href='/#' onClick={() => this.props.getProducts('Laptops', '')}>Laptops</a>\n          </div>\n\n          <div className='search_box'>\n            <select name=\"input_category\" onChange={this.handleInputChange}>\n              <option value=\"\">All</option>\n              <option value=\"Phones\">Phones</option>\n              <option value=\"Tablets\">Tablets</option>\n              <option value=\"Laptops\">Laptops</option>\n            </select>\n            <input \n              type=\"text\" \n              name=\"input_searchString\" \n              value={this.state.input_searchString} \n              onChange={this.handleInputChange} />\n            <button onClick={this.searchProducts}>Search</button>\n          </div>\n          {this.signinHTML()}\n          \n        </nav>\n      )\n    }else{\n      return ''\n    }\n  }\n}\n\n\n\n/* component for showing product list */\nclass Product_List extends React.Component{\n  constructor(props){\n    super(props)\n  }\n  \n  render(){\n    return (\n      this.props.product_list.map((product => {\n        return (\n          <div className='product_object' \n              key={product._id} \n              id={product._id} \n              onClick={()=>this.props.getProductDetail(product._id)}>\n            <img src={\"http://localhost:3001/\" + product.productImage}></img>\n            <a>{product.name}</a>\n            <a>{product.price}</a>\n          </div>)\n        \n      }))\n    )\n  }\n}\n\n/* component for showing product detail */\nclass Product_Detail extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {quantity: 1}\n\n    this.checkLogin = this.checkLogin.bind(this)\n  }\n  \n  /* return current product's JSON in product list */\n  getProductObject(){\n    return this.props.product_list.find(e => e._id === this.props.current_product_id)\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({[name]: value});\n    console.log(name)\n    console.log(value)\n  }\n\n  checkLogin(){\n    console.log('login check')\n    console.log(this.props.isLogin)\n    if (this.props.isLogin){\n      console.log('login check success')\n      this.props.handleAddCart(this.props.current_product_id, this.state.quantity)\n    }else{\n      this.props.changePage(LOGIN_PAGE)\n    }\n  }\n\n  render(){\n    return (\n      <div className='product_detail_holder'>\n        <img src={\"http://localhost:3001/\"+this.getProductObject().productImage}></img>\n        <p>\n          {this.getProductObject().name}<br/>\n          {this.getProductObject().price}<br/>\n          {this.props.product_detail.manufacturer}<br/>\n          {this.props.product_detail.description}\n        </p>\n        <div className='cart_input_bex'>\n          <input\n            type=\"number\"\n            name=\"quantity\"\n            min=\"1\"\n            value={this.state.quantity}\n            onChange={this.handleInputChange}/>\n          <button onClick={()=>this.checkLogin()}>Add to Cart</button>\n        </div>\n      </div>\n    )\n  }\n}\n\n/* login component for Content */\nclass Login extends React.Component{\n  constructor(props){\n    super(props)\n\n    this.state = {\n      username: \"\",\n      password: \"\"\n    }\n    \n    this.handleInputChange = this.handleInputChange.bind(this)\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({[name]: value});\n    console.log(name)\n    console.log(value)\n  }\n\n  render(){\n    return (\n      <div className='login_form'>\n        <label for=\"username\">Username</label>\n        <input\n          tpye=\"text\"\n          name=\"username\"\n          id=\"username\"\n          value={this.state.username}\n          onChange={this.handleInputChange}/>\n        <label for=\"password\">Password</label>\n        <input\n          tpye=\"text\"\n          name=\"password\"\n          id=\"password\"\n          value={this.state.password}\n          onChange={this.handleInputChange}/>\n        <button onClick={() => this.props.handleSignIn(this.state.username, this.state.password)}>Sign in</button>\n      </div>\n    )\n  }\n}\n\n\n/* dynamicly change according to current_page state */\nclass Content extends React.Component {\n  constructor(props){\n    super(props)\n  }\n  render(){\n    if (this.props.current_page == PRODUCTS_LIST_PAGE){\n      return <Product_List \n              product_list={this.props.product_list} \n              getProductDetail={this.props.getProductDetail}/>\n    \n    }else if (this.props.current_page == PRODUCT_DETAIL_PAGE){\n      return <Product_Detail\n              product_detail={this.props.product_detail}\n              current_product_id={this.props.current_product_id}\n              product_list={this.props.product_list}\n              handleAddCart={this.props.handleAddCart}\n              changePage={this.props.changePage}\n              isLogin={this.props.isLogin}/>\n    }else if (this.props.current_page == LOGIN_PAGE){\n      return <Login\n              handleSignIn={this.props.handleSignIn}/>\n    }\n    return \"\"\n  }\n}\n\nclass Footer extends React.Component{\n  constructor(props){\n    super(props)\n  }\n  render(){\n    if (this.props.current_page == PRODUCT_DETAIL_PAGE){\n      return (\n        <footer>\n          <a onClick={()=>this.props.goback()}> &lt; go back</a>\n        </footer>\n      )\n    }\n    return \"\"\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLogin: false,\n      current_page: PRODUCTS_LIST_PAGE,\n      product_list: [],\n      current_product_id: [],\n      product_detail: [],\n      session_info: [],\n      previous_category: \"\",\n      previous_searchString: \"\",\n      previous_page: \"\"\n    }\n\n    this.getProducts = this.getProducts.bind(this)\n    this.getSessionInfo = this.getSessionInfo.bind(this)\n    this.handleSignIn = this.handleSignIn.bind(this)\n    this.handleSignOut = this.handleSignOut.bind(this)\n    this.getProductDetail = this.getProductDetail.bind(this)\n    this.goback = this.goback.bind(this)\n    this.changePage = this.changePage.bind(this)\n    this.handleAddCart = this.handleAddCart.bind(this)\n\n    this.loadInitialPage();\n  }\n\n\n  /* change product list in state and change current page to product list page */\n  getProducts(category, searchString){\n    /* note that the sorting is done in server side */\n    console.log('called getProducts()')\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadpage?category=\" + category + \"&searchstring=\" + searchString,\n      xhrFields: {withCredentials: true},\n      dataType: 'JSON',\n      success: function(result){\n        //save previous seach parameter into state\n        this.setState({previous_category: category, previous_searchString: searchString})\n\n        //change page to products list page and update product_list\n        this.setState({current_page: PRODUCTS_LIST_PAGE, product_list: result})\n        console.log(this.state)\n      }.bind(this)\n    })\n  }\n\n  /* change session info in state */\n  getSessionInfo(){\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/getsessioninfo\",\n      xhrFields: {withCredentials: true},\n      dataType: 'JSON',\n      success: function(result){\n        this.setState({session_info: result})\n      }.bind(this)\n    })\n  }\n\n  /* initial page */\n  loadInitialPage(){\n    this.setState({current_page: PRODUCTS_LIST_PAGE, previous_category: \"\", previous_searchString: \"\"})\n    this.getProducts(\"\",\"\");\n    this.getSessionInfo();\n  }\n\n  /* change current page location (current_page state) */\n  changePage(page){\n    console.log('changePage is called.')\n    console.log(this.state)\n    console.log(page)\n    // this.setState({previous_page: this.state.current_page})\n    this.setState({previous_page: this.state.current_page, current_page: page}, () =>{\n      console.log('after change')\n      console.log(this.state)\n    })\n  }\n\n  handleSignIn(username, password){\n    console.log(username, password)\n    if (username == \"\" || password == \"\"){\n      alert(\"You must enter username and password\")\n    }else{\n      $.ajax({\n        type: 'POST',\n        url: 'http://localhost:3001/signin',\n        data: {username: username, password: password},\n        xhrFields: {withCredentials: true},\n        success: function(result){\n          if (result.msg == 'Login success'){\n            this.setState({isLogin: true})\n            this.changePage(this.state.previous_page)\n            this.getSessionInfo()\n          }\n          alert(result.msg)\n          \n        }.bind(this)\n      })\n    }\n  }\n\n  handleSignOut(){\n\n  }\n\n  handleAddCart(productid, quantity){\n    if (this.state.isLogin){\n      $.ajax({\n        type:\"PUT\",\n        data: {productid: productid, quantity:quantity},\n        url: \"http://localhost:3001/addtocart\",\n        dataType: 'JSON',\n        xhrFields: {withCredentials: true},\n        success: function(result){\n          if (result.msg == 'Success'){\n            this.getSessionInfo()\n            this.changePage(PRODUCTS_LIST_PAGE)\n          }else{\n            console.log(result)\n            alert('fuck')\n          }\n        }.bind(this)\n      })\n    }else{\n\n    }\n  }\n\n  /* go back to previous page. Called when 'go back' is clicked */\n  goback(){\n    this.getProducts(this.state.previous_category, this.state.previous_searchString);\n  }\n\n  /* change product_detail in state and change current page to detail page*/\n  getProductDetail(productid){\n    console.log('getProductDetail')\n    $.ajax({\n      type: \"GET\",\n      url: \"http://localhost:3001/loadproduct/\"+productid,\n      xhrFields: {withCredentials: true},\n      dataType: 'JSON',\n      success: function(result){\n        this.setState({product_detail: result, current_page:PRODUCT_DETAIL_PAGE, current_product_id: productid})\n        console.log(this.state)\n      }.bind(this)\n    })\n  }\n\n  render(){\n    return (\n      <React.Fragment>\n        <Nav \n          isLogin={this.state.isLogin}\n          getProducts={this.getProducts}\n          session_info={this.state.session_info}\n          handleSignOut={this.handleSignOut}\n          changePage={this.changePage}\n          current_page={this.state.current_page}\n          />\n        <Content \n          current_page={this.state.current_page}\n          product_list={this.state.product_list}\n          product_detail={this.state.product_detail}\n          getProductDetail={this.getProductDetail}\n          current_product_id={this.state.current_product_id}\n          handleSignIn={this.handleSignIn}\n          changePage={this.changePage}\n          isLogin={this.state.isLogin}\n          handleAddCart={this.handleAddCart}\n          />\n        <Footer \n          current_page={this.state.current_page}\n          goback={this.goback}/>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}